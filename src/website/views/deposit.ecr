<html>
	<style>
		.deposit_address {
			padding: 2px;

			user-select: all;
			-webkit-user-select: all;

			background-color: #DCDCDC;
			border-radius: 3px;
			color: black;
		}

		.info {
			display: inline;
		}

		.info text {
			display: none;

			background-color: #ffe4fd;
			padding: 2px;
			margin: 2px;
			border-radius: 2px;
		}

		.info button:hover + text {
			display: inline;
		}
	</style>
	<body>
		<title>Deposit</title>
		<% tmp_coin_list = TB::Data::Coin.read_all %>
		<% TB::Data::DepositAddress.read_all_active_for_account(user.to_i32).each do |deposit| %>
			<% name = tmp_coin_list[deposit.coin].name_long %>
			<%= name %>: <text class="deposit_address"><%= deposit.address %></text>
			<div class="info">
				<button><svg class="fa" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="info" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512" data-fa-i2svg=""><path fill="currentColor" d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"></path></svg></button>
				<text>Generated at <%= deposit.created_time %></text>
			</div>
			<% tmp_coin_list.delete(deposit.coin) %>
		<% end %>
		<% tmp_coin_list.each_value do |coin| %>
		<form method="post" action="/api/generate_deposit_address?coin=<%= coin.id%>">
			<%= "#{coin.name_long}: " %>
			<input type="hidden" name="authenticity_token" value="<%= env.session.string("csrf") %>">
			<button type="submit">Generate Deposit Address</button>
		</form>
		<% end %>
	</body>
</html>